<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Hotel Reservation</title>

  <!-- Bootstrap core CSS -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/modern-business.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css"  href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
  
  <!-- Makes difference in header layout -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->
  

  <link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css" rel="stylesheet">

</head>

<body style="display:none;">

    <div class="container">
        <div style="margin-top:150px;"></div>
        <div class="row">
          <div class="col-sm">
          </div>
          <div class="col-sm">
            <form id="login-form">
              <div class="form-group">
                  <label>Email address</label>
                  <input type="email" class="form-control" placeholder="Enter email">
              </div>
              <div class="form-group">
                  <label>Password</label>
                  <input type="password" class="form-control" placeholder="Password">
              </div>
    
              <button type="submit" class="btn btn-primary">Login</button>
    
              <br>
              <span style="font-size: smaller;">If you don't have account register </span> <a style="font-size: smaller;" href="#" onclick="open_register_modal()">here</a>
            </form>
          </div>
          <div class="col-sm">
          </div>
        </div>
      </div>
</body>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="assets/js/custom.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>

  <script src="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <script src="//cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/jquery.validate.min.js"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"></script>

    <script>

        var user = window.localStorage.getItem("user");
        if (user){
        user = JSON.parse(user);
        if (user.email){
            window.location = "index.html";
        }else{
            $('body').show();
        }
        }else{
        $('body').show();
        }

        $('#login-form').validate({
        submitHandler: function(form) {
            var user = {
            email: $('#login-form input[type="email"]').val(),
            password: $('#login-form input[type="password"]').val()
            }

            $.post( "rest/login", user ).done(function(data) {
            window.localStorage.setItem("user", JSON.stringify(data));
            window.location = "index.html";
            }).fail(function(error) {
            toastr.error(error.responseText)
            });
        }
        });


    </script>

</html>
